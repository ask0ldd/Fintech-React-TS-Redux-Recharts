
<!doctype html>
<html lang="en">

<head>
    <title>Code coverage report for src/components/Messaging/InboxTable.tsx</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" href="../../../prettify.css" />
    <link rel="stylesheet" href="../../../base.css" />
    <link rel="shortcut icon" type="image/x-icon" href="../../../favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type='text/css'>
        .coverage-summary .sorter {
            background-image: url(../../../sort-arrow-sprite.png);
        }
    </style>
</head>
    
<body>
<div class='wrapper'>
    <div class='pad1'>
        <h1><a href="../../../index.html">All files</a> / <a href="index.html">src/components/Messaging</a> InboxTable.tsx</h1>
        <div class='clearfix'>
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Statements</span>
                <span class='fraction'>98/98</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Branches</span>
                <span class='fraction'>32/32</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">84.61% </span>
                <span class="quiet">Functions</span>
                <span class='fraction'>11/13</span>
            </div>
        
            
            <div class='fl pad1y space-right2'>
                <span class="strong">100% </span>
                <span class="quiet">Lines</span>
                <span class='fraction'>98/98</span>
            </div>
        
            
        </div>
        <p class="quiet">
            Press <em>n</em> or <em>j</em> to go to the next uncovered block, <em>b</em>, <em>p</em> or <em>k</em> for the previous block.
        </p>
        <template id="filterTemplate">
            <div class="quiet">
                Filter:
                <input oninput="onInput()" type="search" id="fileSearch">
            </div>
        </template>
    </div>
    <div class='status-line high'></div>
    <pre><table class="coverage">
<tr><td class="line-count quiet"><a name='L1'></a><a href='#L1'>1</a>
<a name='L2'></a><a href='#L2'>2</a>
<a name='L3'></a><a href='#L3'>3</a>
<a name='L4'></a><a href='#L4'>4</a>
<a name='L5'></a><a href='#L5'>5</a>
<a name='L6'></a><a href='#L6'>6</a>
<a name='L7'></a><a href='#L7'>7</a>
<a name='L8'></a><a href='#L8'>8</a>
<a name='L9'></a><a href='#L9'>9</a>
<a name='L10'></a><a href='#L10'>10</a>
<a name='L11'></a><a href='#L11'>11</a>
<a name='L12'></a><a href='#L12'>12</a>
<a name='L13'></a><a href='#L13'>13</a>
<a name='L14'></a><a href='#L14'>14</a>
<a name='L15'></a><a href='#L15'>15</a>
<a name='L16'></a><a href='#L16'>16</a>
<a name='L17'></a><a href='#L17'>17</a>
<a name='L18'></a><a href='#L18'>18</a>
<a name='L19'></a><a href='#L19'>19</a>
<a name='L20'></a><a href='#L20'>20</a>
<a name='L21'></a><a href='#L21'>21</a>
<a name='L22'></a><a href='#L22'>22</a>
<a name='L23'></a><a href='#L23'>23</a>
<a name='L24'></a><a href='#L24'>24</a>
<a name='L25'></a><a href='#L25'>25</a>
<a name='L26'></a><a href='#L26'>26</a>
<a name='L27'></a><a href='#L27'>27</a>
<a name='L28'></a><a href='#L28'>28</a>
<a name='L29'></a><a href='#L29'>29</a>
<a name='L30'></a><a href='#L30'>30</a>
<a name='L31'></a><a href='#L31'>31</a>
<a name='L32'></a><a href='#L32'>32</a>
<a name='L33'></a><a href='#L33'>33</a>
<a name='L34'></a><a href='#L34'>34</a>
<a name='L35'></a><a href='#L35'>35</a>
<a name='L36'></a><a href='#L36'>36</a>
<a name='L37'></a><a href='#L37'>37</a>
<a name='L38'></a><a href='#L38'>38</a>
<a name='L39'></a><a href='#L39'>39</a>
<a name='L40'></a><a href='#L40'>40</a>
<a name='L41'></a><a href='#L41'>41</a>
<a name='L42'></a><a href='#L42'>42</a>
<a name='L43'></a><a href='#L43'>43</a>
<a name='L44'></a><a href='#L44'>44</a>
<a name='L45'></a><a href='#L45'>45</a>
<a name='L46'></a><a href='#L46'>46</a>
<a name='L47'></a><a href='#L47'>47</a>
<a name='L48'></a><a href='#L48'>48</a>
<a name='L49'></a><a href='#L49'>49</a>
<a name='L50'></a><a href='#L50'>50</a>
<a name='L51'></a><a href='#L51'>51</a>
<a name='L52'></a><a href='#L52'>52</a>
<a name='L53'></a><a href='#L53'>53</a>
<a name='L54'></a><a href='#L54'>54</a>
<a name='L55'></a><a href='#L55'>55</a>
<a name='L56'></a><a href='#L56'>56</a>
<a name='L57'></a><a href='#L57'>57</a>
<a name='L58'></a><a href='#L58'>58</a>
<a name='L59'></a><a href='#L59'>59</a>
<a name='L60'></a><a href='#L60'>60</a>
<a name='L61'></a><a href='#L61'>61</a>
<a name='L62'></a><a href='#L62'>62</a>
<a name='L63'></a><a href='#L63'>63</a>
<a name='L64'></a><a href='#L64'>64</a>
<a name='L65'></a><a href='#L65'>65</a>
<a name='L66'></a><a href='#L66'>66</a>
<a name='L67'></a><a href='#L67'>67</a>
<a name='L68'></a><a href='#L68'>68</a>
<a name='L69'></a><a href='#L69'>69</a>
<a name='L70'></a><a href='#L70'>70</a>
<a name='L71'></a><a href='#L71'>71</a>
<a name='L72'></a><a href='#L72'>72</a>
<a name='L73'></a><a href='#L73'>73</a>
<a name='L74'></a><a href='#L74'>74</a>
<a name='L75'></a><a href='#L75'>75</a>
<a name='L76'></a><a href='#L76'>76</a>
<a name='L77'></a><a href='#L77'>77</a>
<a name='L78'></a><a href='#L78'>78</a>
<a name='L79'></a><a href='#L79'>79</a>
<a name='L80'></a><a href='#L80'>80</a>
<a name='L81'></a><a href='#L81'>81</a>
<a name='L82'></a><a href='#L82'>82</a>
<a name='L83'></a><a href='#L83'>83</a>
<a name='L84'></a><a href='#L84'>84</a>
<a name='L85'></a><a href='#L85'>85</a>
<a name='L86'></a><a href='#L86'>86</a>
<a name='L87'></a><a href='#L87'>87</a>
<a name='L88'></a><a href='#L88'>88</a>
<a name='L89'></a><a href='#L89'>89</a>
<a name='L90'></a><a href='#L90'>90</a>
<a name='L91'></a><a href='#L91'>91</a>
<a name='L92'></a><a href='#L92'>92</a>
<a name='L93'></a><a href='#L93'>93</a>
<a name='L94'></a><a href='#L94'>94</a>
<a name='L95'></a><a href='#L95'>95</a>
<a name='L96'></a><a href='#L96'>96</a>
<a name='L97'></a><a href='#L97'>97</a>
<a name='L98'></a><a href='#L98'>98</a></td><td class="line-coverage quiet"><span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">30x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">265x</span>
<span class="cline-any cline-yes">265x</span>
<span class="cline-any cline-yes">265x</span>
<span class="cline-any cline-yes">265x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">38x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">563x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span>
<span class="cline-any cline-yes">1x</span></td><td class="text"><pre class="prettyprint lang-js">import { useEffect, useState } from 'react'
import '../../styles/messaging/InboxTable.css'
import ok from '/icons/ok.png'
import {ISelectableEmail} from '../../datas/emailsDatas'
import { useTypedDispatch, useTypedSelector } from '../../hooks/redux'
import { deleteEmail, setActivePage, setDisplayedEmails_IDList, setSortedEmails, setSortingRule, setTargetEmailSelectStatus, switchSelectAllCheckboxStatus } from '../../redux/messagingSlice'
&nbsp;
function InboxTable(){
&nbsp;
    const dispatch = useTypedDispatch()
    const emails  = useTypedSelector((state) =&gt; state.messaging.emails)
    const activePage  = useTypedSelector((state) =&gt; state.messaging.activePage)
    const sortedEmails  = useTypedSelector((state) =&gt; state.messaging.sortedEmails)
    const selectAllCheckboxStatus  = useTypedSelector((state) =&gt; state.messaging.selectAllCheckboxStatus)
    const filter  = useTypedSelector((state) =&gt; state.messaging.filter)
&nbsp;
    // shorten longer email titles
    function cropEmailTitle(str : string){
        if (str.length &lt;= 78) return str
        return str.slice(0,78)+'...'
    }
&nbsp;
    // menu : delete / spam / mark as read / refresh
&nbsp;
    return(
        &lt;article className="inboxEmailsList__container"&gt;
            &lt;table&gt;
                &lt;thead&gt;
                    &lt;tr&gt;
                        &lt;th className='checkboxCell' onClick={() =&gt; dispatch(switchSelectAllCheckboxStatus({}))}&gt;
                            &lt;label id="selectColumn" className='sr-only'&gt;Select All Mails&lt;/label&gt;
                            &lt;div style={selectAllCheckboxStatus === true ? {background:'#5c39aa', border:'1px solid #5c39aa'} : {}} className='customCheckbox' aria-checked={selectAllCheckboxStatus} role="checkbox" aria-labelledby='selectColumn'&gt;
                                {selectAllCheckboxStatus === true &amp;&amp; &lt;img alt="allSelectedV" style={{width:'10px', height:'10px'}} src={ok}/&gt;}
                            &lt;/div&gt;
                        &lt;/th&gt;
                        &lt;th className='fileAttachColumn'&gt;&lt;/th&gt;
                        &lt;th onClick={() =&gt; dispatch(setSortingRule({datakey : 'sender', datatype : 'string'}))}&gt;From&lt;/th&gt;
                        &lt;th onClick={() =&gt; dispatch(setSortingRule({datakey : 'title', datatype : 'string'}))}&gt;Title&lt;/th&gt;
                        &lt;th onClick={() =&gt; dispatch(setSortingRule({datakey : 'date', datatype : 'date'}))}&gt;Date&lt;/th&gt;
                        &lt;th className='delete'&gt;
                            &lt;label id="deleteColumn" className='sr-only'&gt;Delete Mail&lt;/label&gt;
                        &lt;/th&gt;
                    &lt;/tr&gt;
                &lt;/thead&gt;
                &lt;tbody data-testid="inboxbody"&gt;
                    {[...sortedEmails].slice((activePage-1)*15, (activePage-1)*15+15).map((email, index) =&gt; /* creer une liste liant index &amp; id */
                    &lt;tr style={/*email.read === false ? {backgroundColor:'rgba(183, 167, 211, 0.3)'} :*/ {}} key={"tremail"+index}&gt;
                        &lt;td onClick={() =&gt; dispatch(setTargetEmailSelectStatus({emailId : email.id}))} className='checkboxCell'&gt;
                            &lt;div style={email.selected === true ? {background:'#5c39aa', border:'1px solid #5c39aa'} : {}} className='customCheckbox' aria-checked={email.selected} role="checkbox"&gt;
                                {email.selected === true &amp;&amp; &lt;img alt="selectedV" style={{width:'10px', height:'10px'}} src={ok}/&gt;}
                            &lt;/div&gt;
                        &lt;/td&gt;
                        &lt;td className='fileAttachColumn'&gt;
                            {email.file!=null &amp;&amp;
                                &lt;svg data-testid="attachment icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"&gt;
                                &lt;title id={'fileAttachment'+index}&gt;File Attachment&lt;/title&gt;
                                &lt;path d="M12.4219 5.45802L17.6492 14.5119C18.6537 16.2518 18.0581 18.4747 16.3182 19.4793C14.5782 20.4838 12.3554 19.8882 11.3508 18.1483L5.66899 8.30709C5.3676 7.78508 5.28593 7.16472 5.44194 6.5825C5.59795 6.00027 5.97885 5.50387 6.50086 5.20248C7.02287 4.9011 7.64323 4.81943 8.22545 4.97544C8.80768 5.13144 9.30408 5.51235 9.60547 6.03436L14.3782 14.301C14.6282 14.734 14.4785 15.2928 14.0454 15.5428C13.6124 15.7928 13.0536 15.6431 12.8036 15.2101L8.48542 7.73075L7.30448 8.41256L11.6227 15.8919C11.924 16.4139 12.4204 16.7948 13.0027 16.9508C13.5849 17.1068 14.2053 17.0251 14.7273 16.7238C15.2493 16.4224 15.6302 15.926 15.7862 15.3437C15.9422 14.7615 15.8605 14.1412 15.5591 13.6191L10.7864 5.35254C9.78186 3.61262 7.55897 3.01699 5.81904 4.02154C4.07912 5.02609 3.4835 7.24898 4.48804 8.98891L10.1699 18.8301C11.5517 21.2235 14.6066 22.042 17 20.6602C19.3934 19.2784 20.2119 16.2235 18.8301 13.8301L13.6028 4.7762L12.4219 5.45802Z" fill="#545454"/&gt;
                                &lt;/svg&gt;
                            }
                        &lt;/td&gt;
                        &lt;td style={/*email.read === false ? {fontWeight:'600', color:'rgba(91, 57, 170, 0.8)'} :*/ {}} className='from'&gt;{email.sender}&lt;/td&gt;
                        &lt;td style={/*email.read === false ? {fontWeight:'600', color:'rgba(91, 57, 170, 0.8)'} :*/ {}}&gt;{cropEmailTitle(email.title)}&lt;/td&gt;
                        &lt;td style={{width:'10rem'}/*email.read === false ? {fontWeight:'600', color:'rgba(91, 57, 170, 0.8)'} :*/}&gt;{formatDate(email.date)}&lt;/td&gt;
                        &lt;td onClick={() =&gt; dispatch(deleteEmail({emailId :email.id}))} role="button" aria-labelledby='deleteColumn' style={{display:'flex', height:'37px', justifyContent:'center', alignItems:'center'}} className='delete'&gt;
                            &lt;svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 256 256"&gt;&lt;title id={'deleteMail'+index}&gt;Delete Mail&lt;/title&gt;&lt;path fill="currentColor" d="M208.49 191.51a12 12 0 0 1-17 17L128 145l-63.51 63.49a12 12 0 0 1-17-17L111 128L47.51 64.49a12 12 0 0 1 17-17L128 111l63.51-63.52a12 12 0 0 1 17 17L145 128Z"/&gt;&lt;/svg&gt;
                        &lt;/td&gt;
                    &lt;/tr&gt;)}
                &lt;/tbody&gt;
            &lt;/table&gt;
            &lt;div className='inbox__footer'&gt;
                &lt;span&gt;Showing {(activePage-1)*15+1} to {(activePage-1)*15+15 &gt; sortedEmails.length ? sortedEmails.length : (activePage-1)*15+15} of {sortedEmails.length} emails&lt;/span&gt;
                &lt;div className='pagination__container'&gt;
                    {activePage &gt; 1 &amp;&amp; &lt;div role="button" className='pagination__nextPrev' onClick={() =&gt; dispatch(setActivePage({activePage : activePage-1}))}&gt;Prev&lt;/div&gt;}
                    {activePage &gt; 1 &amp;&amp; &lt;div role="button" className='pagination__button' onClick={<span class="fstat-no" title="function not covered" >() =&gt; dispatch(setActivePage({activePage : activePage-1}))}&gt;{a</span>ctivePage-1}&lt;/div&gt;}
                    &lt;div role="button" className='pagination__buttonActive'&gt;{activePage}&lt;/div&gt;
                    {(activePage-1)*15+15 &lt; sortedEmails.length &amp;&amp; &lt;div role="button" className='pagination__button' onClick={<span class="fstat-no" title="function not covered" >() =&gt; dispatch(setActivePage({activePage : activePage+1}))}&gt;{a</span>ctivePage+1}&lt;/div&gt;}
                    {(activePage-1)*15+15 &lt; sortedEmails.length &amp;&amp; &lt;div role="button" className='pagination__nextPrev' onClick={() =&gt; dispatch(setActivePage({activePage : activePage+1}))}&gt;Next&lt;/div&gt;}
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/article&gt;
    )
}
&nbsp;
export default InboxTable
&nbsp;
export const frCollator = new Intl.Collator('en')
&nbsp;
function formatDate(date : string){
    return date.replaceAll('/', '-')
}
&nbsp;
/*interface IProps{
    emailsState : Array&lt;ISelectableEmail&gt;
    setEmailsState : (emails : Array&lt;ISelectableEmail&gt;) =&gt; void
    areAllEmailsSelected : boolean
    setAllEmailsToSelected : (selected : boolean) =&gt; void
    filterEmails : "toread" | "file" | null
}*/</pre></td></tr></table></pre>

                <div class='push'></div><!-- for sticky footer -->
            </div><!-- /wrapper -->
            <div class='footer quiet pad2 space-top1 center small'>
                Code coverage generated by
                <a href="https://istanbul.js.org/" target="_blank" rel="noopener noreferrer">istanbul</a>
                at 2023-08-21T00:55:07.091Z
            </div>
        <script src="../../../prettify.js"></script>
        <script>
            window.onload = function () {
                prettyPrint();
            };
        </script>
        <script src="../../../sorter.js"></script>
        <script src="../../../block-navigation.js"></script>
    </body>
</html>
    